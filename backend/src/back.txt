create database shework;
use shework;

create table usuarios(
	id_usuario int not null auto_increment,
    nome varchar(120) not null,
    email varchar(120) not null,
    senha varchar(120) not null,
    dt_nascimento date,
    categoria enum('Trabalhos Diversos', 'Técnico em TI','Empresa'),
    primary key(id_usuario)
);

select * from usuarios;

create table comentarios(
	id_comentario int not null auto_increment,
	id_comentarioUsuario int not null,
	descricao varchar(200) not null,
    primary key(id_comentario) 
);

-- foreign key (userComment_id) REFERENCES usuarios(id_usuario)
ALTER TABLE comentarios ADD CONSTRAINT id_comentarioUsuario
foreign key (id_comentarioUsuario) REFERENCES usuarios(id_usuario);

create table publicacao_pessoa(
	id_publiPessoa int not null auto_increment,
    id_usuarioPessoa int not null,
    nome varchar(120) not null,
    dt_nascimento date,
    cidade_estado varchar(120) not null,
    email varchar(120) not null,
    linkedin varchar(120) not null,
    nacionalidade varchar(120) not null,
    area_interesse varchar(120) not null,
    
    primary key(id_publiPessoa)

);

   -- foreign key (id_usuario) REFERENCES usuarios(id),
  --  foreign key (id_competencia_tec) REFERENCES pessoa_competencia_tecnica(id),
  --  foreign key (id_linguas) REFERENCES pessoa_linguas(id),
   -- foreign key (id_certificados) REFERENCES pessoa_certificados(id),
  --  foreign key (id_experiencias) REFERENCES pessoa_experiencia(id),
  --  foreign key (id_cursos) REFERENCES pessoa_curso(id) 
  
ALTER TABLE publicacao_pessoa ADD CONSTRAINT  id_usuarioPessoa
foreign key (id_usuarioPessoa) REFERENCES usuarios(id_usuario);

ALTER TABLE publicacao_pessoa ADD CONSTRAINT id_competencia_tec
foreign key (id_competencia_tec) REFERENCES pessoa_competencia_tecnica(id_competenciaTec);

ALTER TABLE publicacao_pessoa ADD CONSTRAINT id_linguas
foreign key (id_linguas) REFERENCES pessoa_linguas(id_lingua);

create table pessoa_competencia_tecnica(
	id_competenciaTec int not null auto_increment,
	id_pessoaCompetencia int not null,
	nome varchar(120) not null,
	nivel_conhecimento enum('Básico', 'Intermediário','Avançado'),
    primary key(id_competenciaTec)
);

ALTER TABLE pessoa_competencia_tecnica ADD CONSTRAINT id_pessoaCompetencia
FOREIGN KEY(id_pessoaCompetencia) REFERENCES publicacao_pessoa(id_publiPessoa);

-- foreign key (id_pessoa) REFERENCES publicacao_pessoa(id)

create table pessoa_linguas(
	id_lingua int not null auto_increment,
	id_pessoaLingua int not null,
	nome varchar(120) not null,
	nivel_conhecimento enum('Básico', 'Intermediário','Avançado'),
    primary key(id_lingua)
);

ALTER TABLE pessoa_linguas ADD CONSTRAINT id_pessoaLingua 
FOREIGN KEY(id_pessoaLingua) REFERENCES publicacao_pessoa(id_publiPessoa);

-- foreign key (id_pessoa) REFERENCES publicacao_pessoa(id)

create table pessoa_experiencia(
	id_experiencia int not null auto_increment,
	id_pessoaExperiencia int not null,
    nome varchar(120) not null,
    dt_inicio date,
    dt_final date,
    descricao varchar(200) not null,
    primary key(id_experiencia)
   
);

-- foreign key (id_pessoaExperiencia) REFERENCES publicacao_pessoa(id)
ALTER TABLE pessoa_experiencia ADD CONSTRAINT id_pessoaExperiencia 
FOREIGN KEY(id_pessoaExperiencia) REFERENCES publicacao_pessoa(id_publiPessoa);

create table pessoa_curso(
	id_curso int not null auto_increment,
	id_pessoaCurso int not null,
    nome varchar(120) not null,
    dt_inicio date,
    dt_final date,
    descricao varchar(200) not null,
    primary key(id_curso)
    
);
-- foreign key (id_pessoaCurso) REFERENCES publicacao_pessoa(id)
ALTER TABLE pessoa_curso ADD CONSTRAINT id_pessoaCurso
FOREIGN KEY(id_pessoaCurso) REFERENCES publicacao_pessoa(id_publiPessoa);

create table pessoa_certificados(
	id_certificado int not null auto_increment,
	id_pessoaCertificado int not null,
    nome varchar(120) not null,
    link varchar(120) not null,
	primary key(id_certificado)
   
);

--  foreign key (id_pessoaCertificado) REFERENCES publicacao_pessoa(id)
ALTER TABLE pessoa_certificados ADD CONSTRAINT id_pessoaCertificado
FOREIGN KEY(id_pessoaCertificado) REFERENCES publicacao_pessoa(id_publiPessoa);

create table publicacao_empresa(
	id_publiEmpresa int not null auto_increment,
    id_usuarioEmpresa int not null,
    nome varchar(120) not null,
    img blob,
    somos_descricao varchar(120) not null,
    fazemos_descricao varchar(120) not null,
    valores varchar(120) not null,
    primary key(id_publiEmpresa)
);

select * from publicacao_empresa;
-- foreign key (id_usuarioEmpresa) REFERENCES usuarios(id)
ALTER TABLE  publicacao_empresa ADD CONSTRAINT id_usuarioEmpresa
FOREIGN KEY(id_usuarioEmpresa) REFERENCES usuarios(id_usuario);

create table empresa_projetos(
	id_projeto int not null auto_increment,
    id_empresaProjeto int not null,
    projeto_titulo varchar(120) not null,
    projeto_descricao varchar(120) not null,
    projeto_img blob,
    primary key(id_projeto)
);

-- foreign key (id_empresaProjeto) REFERENCES publicacao_empresa(id)
ALTER TABLE empresa_projetos ADD CONSTRAINT id_empresaProjeto
FOREIGN KEY(id_empresaProjeto) REFERENCES publicacao_empresa(id_publiEmpresa);

create table publicacao_vaga(
	id_publiVaga int not null auto_increment,
    id_empresaVaga int not null,
    tipo_vaga varchar(120) not null,
    dt_anuncio date,
    cidade_estado varchar(120) not null,
    media_salarial DOUBLE,
    nivel_conhecimento enum('Junior', 'Pleno','Sênior'),
    area_atuacao varchar(120) not null,
    
    primary key(id_publiVaga)
);

-- foreign key (id_empresaVaga) REFERENCES publicacao_empresa(id_publiEmpresa)
ALTER TABLE publicacao_vaga ADD CONSTRAINT id_empresaVaga
FOREIGN KEY(id_empresaVaga) REFERENCES publicacao_empresa(id_publiEmpresa);

create table vaga_requisitos_obrigatorios (
	id_requisitosOB int not null auto_increment,
    id_vagaRequisitosOB int not null,
    descricao varchar(200) not null,
    
    primary key(id_requisitosOB)
);
-- foreign key (id_vagaRequisitosOB) REFERENCES publicacao_vaga(id_publiVaga)
ALTER TABLE vaga_requisitos_obrigatorios ADD CONSTRAINT id_vagaRequisitosOB 
FOREIGN KEY(id_vagaRequisitosOB ) REFERENCES publicacao_vaga(id_empresaVaga);

create table vaga_requisitos_desejaveis (
	id_requisitosDJ int not null auto_increment,
    id_vagaRequisitosDJ int not null,
    descricao varchar(200) not null,
    
    primary key(id_requisitosDJ)
);
-- foreign key (id_vagaRequisitosDJ ) REFERENCES publicacao_vaga(id_publiVaga)
ALTER TABLE vaga_requisitos_desejaveis ADD CONSTRAINT id_vagaRequisitosDJ
FOREIGN KEY(id_vagaRequisitosDJ) REFERENCES publicacao_vaga(id_empresaVaga);

create table vaga_responsabilidades (
	id_responsabilidades int not null auto_increment,
    id_vagaResponsabilidades int not null,
    descricao varchar(200) not null,
    img blob,
    
    primary key(id_responsabilidades)

);

-- foreign key (id_vagaResponsabilidades) REFERENCES publicacao_vaga(id_publiVaga)
ALTER TABLE vaga_responsabilidades ADD CONSTRAINT id_vagaResponsabilidades
FOREIGN KEY(id_vagaResponsabilidades) REFERENCES publicacao_vaga(id_empresaVaga);

create table vaga_progressao (
	id_progressao int not null auto_increment,
    id_vagaProgressao int not null,
    descricao varchar(200) not null,
    img blob,
    
    primary key(id_progressao)
);

-- foreign key (id_vagaProgressao) REFERENCES publicacao_vaga(id_publiVaga)
ALTER TABLE vaga_progressao ADD CONSTRAINT id_vagaProgressao
FOREIGN KEY(id_vagaProgressao) REFERENCES publicacao_vaga(id_empresaVaga);

create table vaga_projetos (
	id_projeto int not null auto_increment,
    id_vagaProjeto int not null,
    arquivo_pdf blob,
    descricao varchar(200) not null,
    img blob,
    
    primary key(id_projeto)
);

-- foreign key (id_vagaProjeto) REFERENCES publicacao_vaga(id_publiVaga)
ALTER TABLE vaga_projetos ADD CONSTRAINT id_vagaProjeto 
FOREIGN KEY(id_vagaProjeto ) REFERENCES publicacao_vaga(id_empresaVaga);
